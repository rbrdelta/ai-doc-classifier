<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Classifier</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>AI Document Classifier</h1>
        <p>Upload or paste a customer support document to classify it</p>
        
        <div class="input-section">
            <textarea id="documentText" placeholder="Paste your document text here..." rows="6"></textarea>
            <button id="classifyBtn">Classify Document</button>
        </div>
        
        <div id="results" class="results-section" style="display: none;">
            <h3>Classification Results</h3>
            <div id="resultContent"></div>
        </div>

        <div id="analytics-section" style="display: none;">
            <h2>ðŸ“Š Analytics Dashboard</h2>
            
            <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                
                <!-- Key Metrics -->
                <div class="metric-card">
                    <h3>Key Metrics</h3>
                    <div class="metric">
                        <span class="metric-label">Total Classifications:</span>
                        <span id="total-classifications" class="metric-value">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Avg Response Time:</span>
                        <span id="avg-response-time" class="metric-value">0ms</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Error Rate:</span>
                        <span id="error-rate" class="metric-value">0%</span>
                    </div>
                </div>
                
                <!-- Confidence Distribution -->
                <div class="metric-card">
                    <h3>Confidence Distribution</h3>
                    <div class="confidence-chart">
                        <div class="confidence-bar">
                            <span>High (80%+):</span>
                            <div class="bar-container">
                                <div id="high-confidence-bar" class="confidence-bar-fill" style="width: 0%; background: #22c55e;"></div>
                            </div>
                            <span id="high-confidence-count">0</span>
                        </div>
                        <div class="confidence-bar">
                            <span>Medium (60-79%):</span>
                            <div class="bar-container">
                                <div id="medium-confidence-bar" class="confidence-bar-fill" style="width: 0%; background: #f59e0b;"></div>
                            </div>
                            <span id="medium-confidence-count">0</span>
                        </div>
                        <div class="confidence-bar">
                            <span>Low (<60%):</span>
                            <div class="bar-container">
                                <div id="low-confidence-bar" class="confidence-bar-fill" style="width: 0%; background: #ef4444;"></div>
                            </div>
                            <span id="low-confidence-count">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Category Breakdown -->
                <div class="metric-card">
                    <h3>Category Breakdown</h3>
                    <div id="category-breakdown">
                        <!-- Categories will be populated dynamically -->
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="metric-card">
                    <h3>Recent Classifications</h3>
                    <div id="recent-activity" style="max-height: 200px; overflow-y: auto;">
                        <!-- Recent items will be populated -->
            </div>
        </div>
        
        </div>
            <button onclick="refreshAnalytics()" class="classify-btn" style="background: #3b82f6;">
            ðŸ”„ Refresh Analytics
            </button>
        </div>

        <!-- Add analytics toggle button -->
        <button id="analytics-toggle" onclick="toggleAnalytics()" class="classify-btn" style="background: #6366f1; margin: 20px 0;">
        ðŸ“Š View Analytics Dashboard
        </button>

        <!-- Add after analytics section -->
        <div class="bulk-processing-section" style="margin: 30px 0; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px;">
            <h3>ðŸ“„ Bulk Processing</h3>
            <p>Upload a CSV file with documents to classify multiple items at once.</p>
    
            <input type="file" id="csv-upload" accept=".csv" style="margin: 10px 0;">
            <button onclick="processBulkCSV()" class="classify-btn" style="background: #10b981;">
                Process CSV
            </button>
            
            <div id="bulk-progress" style="display: none; margin: 15px 0;">
                <div style="background: #f3f4f6; border-radius: 4px; height: 20px; overflow: hidden;">
                    <div id="progress-bar" style="background: #10b981; height: 100%; width: 0%; transition: width 0.3s;"></div>
                </div>
                <span id="progress-text">Processing...</span>
            </div>
            
            <button onclick="downloadResults()" id="download-btn" class="classify-btn" style="background: #3b82f6; display: none; margin-top: 10px;">
                ðŸ“¥ Download Results CSV
            </button>
        </div>
        
    </div>
    
    <script src="script.js"></script>
</body>
</html>